(kicad_sch (version 20230121) (generator eeschema)

  (uuid e63e39d7-6ac0-4ffd-8aa3-1841a4541b55)

  (paper "A4")

  (title_block
    (title "ESP32 AC Dimmer Fan Controller")
    (date "2025-01-11")
    (rev "1.0")
    (company "")
    (comment 1 "AC Phase-Control Dimmer for Inductive Loads")
    (comment 2 "⚡ HIGH VOLTAGE - DANGEROUS ⚡")
    (comment 3 "Optical isolation between mains and ESP32")
    (comment 4 "For qualified personnel only")
  )

  (lib_symbols
    (symbol "Device:R" (pin_numbers hide) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "R" (at 2.032 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "R" (at 0 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at -1.778 0 90)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "R res resistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Resistor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "R_0_1"
        (rectangle (start -1.016 -2.54) (end 1.016 2.54)
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
      )
      (symbol "R_1_1"
        (pin passive line (at 0 3.81 270) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )

    (symbol "Device:C" (pin_numbers hide) (pin_names (offset 0.254)) (in_bom yes) (on_board yes)
      (property "Reference" "C" (at 0.635 2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Value" "C" (at 0.635 -2.54 0)
        (effects (font (size 1.27 1.27)) (justify left))
      )
      (property "Footprint" "" (at 0.9652 -3.81 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "cap capacitor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Unpolarized capacitor" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "C_0_1"
        (polyline
          (pts
            (xy -2.032 -0.762)
            (xy 2.032 -0.762)
          )
          (stroke (width 0.508) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy -2.032 0.762)
            (xy 2.032 0.762)
          )
          (stroke (width 0.508) (type default))
          (fill (type none))
        )
      )
      (symbol "C_1_1"
        (pin passive line (at 0 3.81 270) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 2.794)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )

    (symbol "Device:D" (pin_numbers hide) (pin_names (offset 1.016) hide) (in_bom yes) (on_board yes)
      (property "Reference" "D" (at 0 2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "D" (at 0 -2.54 0)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "diode" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Diode" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "D_0_1"
        (polyline
          (pts
            (xy -1.27 1.27)
            (xy -1.27 -1.27)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 1.27 0)
            (xy -1.27 0)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 1.27 1.27)
            (xy 1.27 -1.27)
            (xy -1.27 0)
            (xy 1.27 1.27)
          )
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
      )
      (symbol "D_1_1"
        (pin passive line (at -3.81 0 0) (length 2.54)
          (name "K" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 3.81 0 180) (length 2.54)
          (name "A" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )

    (symbol "Device:Fuse" (pin_numbers hide) (pin_names (offset 0)) (in_bom yes) (on_board yes)
      (property "Reference" "F" (at 2.032 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Value" "Fuse" (at -1.905 0 90)
        (effects (font (size 1.27 1.27)))
      )
      (property "Footprint" "" (at -1.778 0 90)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "Datasheet" "~" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_keywords" "fuse" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (property "ki_description" "Fuse" (at 0 0 0)
        (effects (font (size 1.27 1.27)) hide)
      )
      (symbol "Fuse_0_1"
        (rectangle (start -0.762 -2.54) (end 0.762 2.54)
          (stroke (width 0.254) (type default))
          (fill (type none))
        )
        (polyline
          (pts
            (xy 0 2.54)
            (xy 0 -2.54)
          )
          (stroke (width 0) (type default))
          (fill (type none))
        )
      )
      (symbol "Fuse_1_1"
        (pin passive line (at 0 3.81 270) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "1" (effects (font (size 1.27 1.27))))
        )
        (pin passive line (at 0 -3.81 90) (length 1.27)
          (name "~" (effects (font (size 1.27 1.27))))
          (number "2" (effects (font (size 1.27 1.27))))
        )
      )
    )
  )

  (junction (at 50.8 50.8) (diameter 0) (color 0 0 0 0)
    (uuid 11111111-1111-1111-1111-111111111111)
  )
  (junction (at 50.8 100.8) (diameter 0) (color 0 0 0 0)
    (uuid 22222222-2222-2222-2222-222222222222)
  )

  (wire (pts (xy 30.48 50.8) (xy 40.64 50.8))
    (stroke (width 0) (type default))
    (uuid 33333333-3333-3333-3333-333333333333)
  )

  (wire (pts (xy 30.48 100.8) (xy 40.64 100.8))
    (stroke (width 0) (type default))
    (uuid 44444444-4444-4444-4444-444444444444)
  )

  (text "⚡ HIGH VOLTAGE SECTION ⚡" (at 40.64 30.48 0)
    (effects (font (size 2.54 2.54) bold) (justify left bottom))
    (uuid 55555555-5555-5555-5555-555555555555)
  )

  (text "DANGER: 110-240V AC MAINS" (at 40.64 35.56 0)
    (effects (font (size 1.905 1.905)) (justify left bottom))
    (uuid 66666666-6666-6666-6666-666666666666)
  )

  (text "Maintain 8mm clearance to low-voltage section" (at 40.64 38.1 0)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 77777777-7777-7777-7777-777777777777)
  )

  (label "AC_LINE" (at 40.64 50.8 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 88888888-8888-8888-8888-888888888888)
  )

  (label "AC_NEUTRAL" (at 40.64 100.8 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left bottom))
    (uuid 99999999-9999-9999-9999-999999999999)
  )

  (global_label "GPIO34_ZC" (shape input) (at 200.66 80.01 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa)
    (property "Intersheets References" "${INTERSHEET_REFS}" (at 213.5019 80.01 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
  )

  (global_label "GPIO25_TRIGGER" (shape output) (at 200.66 90.17 0) (fields_autoplaced)
    (effects (font (size 1.27 1.27)) (justify left))
    (uuid bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb)
    (property "Intersheets References" "${INTERSHEET_REFS}" (at 218.3538 90.17 0)
      (effects (font (size 1.27 1.27)) (justify left) hide)
    )
  )

  (symbol (lib_id "Device:Fuse") (at 43.18 50.8 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000000-0000-0000-0000-000000000001)
    (property "Reference" "F1" (at 43.18 46.99 90)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "5A Fast" (at 43.18 54.61 90)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Fuse:Fuse_Littelfuse_395Series" (at 43.18 52.578 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 43.18 50.8 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 10000000-0000-0000-0001-000000000001))
    (pin "2" (uuid 10000000-0000-0000-0001-000000000002))
    (instances
      (project "ac_dimmer"
        (path "/e63e39d7-6ac0-4ffd-8aa3-1841a4541b55"
          (reference "F1") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:R") (at 60.96 75.184 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000000-0000-0000-0000-000000000002)
    (property "Reference" "R1" (at 62.738 73.914 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "330R 2W" (at 62.738 76.2 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Resistor_THT:R_Axial_DIN0207_L6.3mm_D2.5mm_P10.16mm_Horizontal" (at 59.182 75.184 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 60.96 75.184 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 10000000-0000-0000-0002-000000000001))
    (pin "2" (uuid 10000000-0000-0000-0002-000000000002))
    (instances
      (project "ac_dimmer"
        (path "/e63e39d7-6ac0-4ffd-8aa3-1841a4541b55"
          (reference "R1") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:R") (at 175.26 80.01 90) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000000-0000-0000-0000-000000000007)
    (property "Reference" "R2" (at 175.26 77.47 90)
      (effects (font (size 1.27 1.27)))
    )
    (property "Value" "10k" (at 175.26 82.55 90)
      (effects (font (size 1.27 1.27)))
    )
    (property "Footprint" "Resistor_THT:R_Axial_DIN0207_L6.3mm_D2.5mm_P7.62mm_Horizontal" (at 175.26 81.788 90)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 175.26 80.01 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 10000000-0000-0000-0007-000000000001))
    (pin "2" (uuid 10000000-0000-0000-0007-000000000002))
    (instances
      (project "ac_dimmer"
        (path "/e63e39d7-6ac0-4ffd-8aa3-1841a4541b55"
          (reference "R2") (unit 1)
        )
      )
    )
  )

  (symbol (lib_id "Device:C") (at 190.5 85.09 0) (unit 1)
    (in_bom yes) (on_board yes) (dnp no)
    (uuid 10000000-0000-0000-0000-000000000008)
    (property "Reference" "C1" (at 192.024 83.82 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Value" "100nF" (at 192.024 86.36 0)
      (effects (font (size 1.27 1.27)) (justify left))
    )
    (property "Footprint" "Capacitor_THT:C_Disc_D5.0mm_W2.5mm_P5.00mm" (at 191.4652 88.9 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (property "Datasheet" "~" (at 190.5 85.09 0)
      (effects (font (size 1.27 1.27)) hide)
    )
    (pin "1" (uuid 10000000-0000-0000-0008-000000000001))
    (pin "2" (uuid 10000000-0000-0000-0008-000000000002))
    (instances
      (project "ac_dimmer"
        (path "/e63e39d7-6ac0-4ffd-8aa3-1841a4541b55"
          (reference "C1") (unit 1)
        )
      )
    )
  )

  (sheet_instances
    (path "/" (page "1"))
  )
)
