(kicad_pcb (version 20221018) (generator pcbnew)

  (general
    (thickness 1.6)
  )

  (paper "A4")
  (layers
    (0 "F.Cu" signal)
    (31 "B.Cu" signal)
    (32 "B.Adhes" user "B.Adhesive")
    (33 "F.Adhes" user "F.Adhesive")
    (34 "B.Paste" user)
    (35 "F.Paste" user)
    (36 "B.SilkS" user "B.Silkscreen")
    (37 "F.SilkS" user "F.Silkscreen")
    (38 "B.Mask" user)
    (39 "F.Mask" user)
    (40 "Dwgs.User" user "User.Drawings")
    (41 "Cmts.User" user "User.Comments")
    (42 "Eco1.User" user "User.Eco1")
    (43 "Eco2.User" user "User.Eco2")
    (44 "Edge.Cuts" user)
    (45 "Margin" user)
    (46 "B.CrtYd" user "B.Courtyard")
    (47 "F.CrtYd" user "F.Courtyard")
    (48 "B.Fab" user)
    (49 "F.Fab" user)
  )

  (setup
    (pad_to_mask_clearance 0)
    (pcbplotparams
      (layerselection 0x00010fc_ffffffff)
      (plot_on_all_layers_selection 0x0000000_00000000)
      (disableapertmacros false)
      (usegerberextensions false)
      (usegerberattributes true)
      (usegerberadvancedattributes true)
      (creategerberjobfile true)
      (dashed_line_dash_ratio 12.000000)
      (dashed_line_gap_ratio 3.000000)
      (svgprecision 4)
      (plotframeref false)
      (viasonmask false)
      (mode 1)
      (useauxorigin false)
      (hpglpennumber 1)
      (hpglpenspeed 20)
      (hpglpendiameter 15.000000)
      (dxfpolygonmode true)
      (dxfimperialunits true)
      (dxfusepcbnewfont true)
      (psnegative false)
      (psa4output false)
      (plotreference true)
      (plotvalue true)
      (plotinvisibletext false)
      (sketchpadsonfab false)
      (subtractmaskfromsilk false)
      (outputformat 1)
      (mirror false)
      (drillshape 1)
      (scaleselection 1)
      (outputdirectory "")
    )
  )

  (net 0 "")
  (net 1 "AC_LINE")
  (net 2 "AC_NEUTRAL")
  (net 3 "GND_ESP32")
  (net 4 "GPIO34_ZC")
  (net 5 "GPIO25_TRIGGER")
  (net 6 "+3V3")
  (net 7 "GND_MAINS")
  (net 8 "AC_LINE_FUSED")
  (net 9 "BRIDGE_PLUS")
  (net 10 "TRIAC_MT1")
  (net 11 "TRIAC_GATE")

  (footprint "Resistor_THT:R_Axial_DIN0207_L6.3mm_D2.5mm_P10.16mm_Horizontal" (layer "F.Cu")
    (tstamp 00000000-0000-0000-0001-000000000001)
    (at 140 80)
    (descr "Resistor, Axial_DIN0207 series")
    (tags "Resistor Axial_DIN0207 series")
    (property "Reference" "R1" (at 5.08 0 0) (layer "F.SilkS") (tstamp 00000000-0000-0000-0001-000000000001)
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (property "Value" "330R 2W" (at 5.08 2.5 0) (layer "F.Fab") (tstamp 00000000-0000-0000-0001-000000000002)
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (property "Footprint" "" (at 0 0 0 unlocked) (layer "F.Fab") hide (tstamp 00000000-0000-0000-0001-000000000003)
      (effects (font (size 1.27 1.27)))
    )
    (property "Datasheet" "" (at 0 0 0 unlocked) (layer "F.Fab") hide (tstamp 00000000-0000-0000-0001-000000000004)
      (effects (font (size 1.27 1.27)))
    )
    (path "/10000000-0000-0000-0000-000000000002")
    (attr through_hole)
    (fp_line (start 1.04 0) (end 1.81 0) (stroke (width 0.12) (type solid)) (layer "F.SilkS") (tstamp 00000000-0000-0000-0001-000000000005))
    (fp_line (start 9.12 0) (end 8.35 0) (stroke (width 0.12) (type solid)) (layer "F.SilkS") (tstamp 00000000-0000-0000-0001-000000000006))
    (pad "1" thru_hole circle (at 0 0) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask") (net 9 "BRIDGE_PLUS") (tstamp 00000000-0000-0000-0001-000000000007))
    (pad "2" thru_hole oval (at 10.16 0) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask") (tstamp 00000000-0000-0000-0001-000000000008))
  )

  (footprint "Package_DIP:DIP-6_W7.62mm" (layer "F.Cu")
    (tstamp 00000000-0000-0000-0002-000000000001)
    (at 155 85)
    (descr "6-lead DIP package, row spacing 7.62 mm (300 mils)")
    (tags "DIP THT")
    (property "Reference" "U1" (at 3.81 -2.33 0) (layer "F.SilkS") (tstamp 00000000-0000-0000-0002-000000000001)
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (property "Value" "MOC3021" (at 3.81 7.41 0) (layer "F.Fab") (tstamp 00000000-0000-0000-0002-000000000002)
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (property "Footprint" "" (at 0 0 0 unlocked) (layer "F.Fab") hide (tstamp 00000000-0000-0000-0002-000000000003)
      (effects (font (size 1.27 1.27)))
    )
    (property "Datasheet" "" (at 0 0 0 unlocked) (layer "F.Fab") hide (tstamp 00000000-0000-0000-0002-000000000004)
      (effects (font (size 1.27 1.27)))
    )
    (attr through_hole)
    (fp_arc (start 1.81 -1.33) (mid 3.81 -0.67) (end 5.81 -1.33) (stroke (width 0.12) (type solid)) (layer "F.SilkS") (tstamp 00000000-0000-0000-0002-000000000005))
    (pad "1" thru_hole rect (at 0 0) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask") (tstamp 00000000-0000-0000-0002-000000000006))
    (pad "2" thru_hole oval (at 0 2.54) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask") (net 7 "GND_MAINS") (tstamp 00000000-0000-0000-0002-000000000007))
    (pad "3" thru_hole oval (at 0 5.08) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask") (tstamp 00000000-0000-0000-0002-000000000008))
    (pad "4" thru_hole oval (at 7.62 5.08) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask") (net 3 "GND_ESP32") (tstamp 00000000-0000-0000-0002-000000000009))
    (pad "5" thru_hole oval (at 7.62 2.54) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask") (net 4 "GPIO34_ZC") (tstamp 00000000-0000-0000-0002-000000000010))
    (pad "6" thru_hole oval (at 7.62 0) (size 1.6 1.6) (drill 0.8) (layers "*.Cu" "*.Mask") (tstamp 00000000-0000-0000-0002-000000000011))
  )

  (footprint "Package_TO_SOT_THT:TO-220-3_Vertical" (layer "F.Cu")
    (tstamp 00000000-0000-0000-0003-000000000001)
    (at 100 90 90)
    (descr "TO-220-3, Vertical, RM 2.54mm")
    (tags "TO-220-3 Vertical RM 2.54mm")
    (property "Reference" "Q1" (at 2.54 -4.27 90) (layer "F.SilkS") (tstamp 00000000-0000-0000-0003-000000000001)
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (property "Value" "BTA16-600B" (at 2.54 2.5 90) (layer "F.Fab") (tstamp 00000000-0000-0000-0003-000000000002)
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (property "Footprint" "" (at 0 0 90 unlocked) (layer "F.Fab") hide (tstamp 00000000-0000-0000-0003-000000000003)
      (effects (font (size 1.27 1.27)))
    )
    (property "Datasheet" "" (at 0 0 90 unlocked) (layer "F.Fab") hide (tstamp 00000000-0000-0000-0003-000000000004)
      (effects (font (size 1.27 1.27)))
    )
    (attr through_hole)
    (pad "1" thru_hole rect (at 0 0 90) (size 1.905 2) (drill 1.1) (layers "*.Cu" "*.Mask") (net 8 "AC_LINE_FUSED") (tstamp 00000000-0000-0000-0003-000000000005))
    (pad "2" thru_hole oval (at 2.54 0 90) (size 1.905 2) (drill 1.1) (layers "*.Cu" "*.Mask") (net 11 "TRIAC_GATE") (tstamp 00000000-0000-0000-0003-000000000006))
    (pad "3" thru_hole oval (at 5.08 0 90) (size 1.905 2) (drill 1.1) (layers "*.Cu" "*.Mask") (net 10 "TRIAC_MT1") (tstamp 00000000-0000-0000-0003-000000000007))
  )

  (gr_text "⚡ HIGH VOLTAGE ⚡" (at 120 35 0) (layer "F.SilkS") (tstamp 00000000-0000-0000-0004-000000000001)
    (effects (font (size 2 2) (thickness 0.3) bold) (justify left bottom))
  )

  (gr_text "ESP32 AC DIMMER v1.0" (at 120 45 0) (layer "F.SilkS") (tstamp 00000000-0000-0000-0004-000000000002)
    (effects (font (size 1.5 1.5) (thickness 0.25)) (justify left bottom))
  )

  (gr_text "DANGER: 110-240V AC" (at 120 40 0) (layer "F.SilkS") (tstamp 00000000-0000-0000-0004-000000000003)
    (effects (font (size 1.2 1.2) (thickness 0.2)) (justify left bottom))
  )

  (gr_text "ISOLATION BARRIER\n⚠ 8mm MINIMUM ⚠" (at 150 75 90) (layer "Dwgs.User") (tstamp 00000000-0000-0000-0004-000000000004)
    (effects (font (size 1 1) (thickness 0.15) bold) (justify left bottom))
  )

  (gr_line (start 50 30) (end 200 30) (stroke (width 0.15) (type solid)) (layer "Edge.Cuts") (tstamp 00000000-0000-0000-0005-000000000001))
  (gr_line (start 200 30) (end 200 130) (stroke (width 0.15) (type solid)) (layer "Edge.Cuts") (tstamp 00000000-0000-0000-0005-000000000002))
  (gr_line (start 200 130) (end 50 130) (stroke (width 0.15) (type solid)) (layer "Edge.Cuts") (tstamp 00000000-0000-0000-0005-000000000003))
  (gr_line (start 50 130) (end 50 30) (stroke (width 0.15) (type solid)) (layer "Edge.Cuts") (tstamp 00000000-0000-0000-0005-000000000004))

  (gr_line (start 145 30) (end 145 130) (stroke (width 0.5) (type dash)) (layer "Dwgs.User") (tstamp 00000000-0000-0000-0005-000000000005))

  (dimension (type aligned) (layer "Dwgs.User") (tstamp 00000000-0000-0000-0006-000000000001)
    (pts (xy 50 30) (xy 200 30))
    (height 10)
    (gr_text "150.0000 mm" (at 125 18 0) (layer "Dwgs.User") (tstamp 00000000-0000-0000-0006-000000000002)
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (format (prefix "") (suffix "") (units 3) (units_format 1) (precision 4))
    (style (thickness 0.15) (arrow_length 1.27) (text_position_mode 0) (extension_height 0.58642) (extension_offset 0) keep_text_aligned)
  )

  (dimension (type aligned) (layer "Dwgs.User") (tstamp 00000000-0000-0000-0006-000000000003)
    (pts (xy 200 30) (xy 200 130))
    (height 10)
    (gr_text "100.0000 mm" (at 212 80 90) (layer "Dwgs.User") (tstamp 00000000-0000-0000-0006-000000000004)
      (effects (font (size 1 1) (thickness 0.15)))
    )
    (format (prefix "") (suffix "") (units 3) (units_format 1) (precision 4))
    (style (thickness 0.15) (arrow_length 1.27) (text_position_mode 0) (extension_height 0.58642) (extension_offset 0) keep_text_aligned)
  )

  (zone (net 1) (net_name "AC_LINE") (layer "F.Cu") (tstamp 00000000-0000-0000-0007-000000000001) (hatch edge 0.5)
    (connect_pads (clearance 0.5))
    (min_thickness 0.25) (filled_areas_thickness no)
    (fill yes (thermal_gap 0.5) (thermal_bridge_width 0.5))
    (polygon
      (pts
        (xy 55 35)
        (xy 140 35)
        (xy 140 65)
        (xy 55 65)
      )
    )
  )

  (zone (net 3) (net_name "GND_ESP32") (layer "B.Cu") (tstamp 00000000-0000-0000-0007-000000000002) (hatch edge 0.5)
    (connect_pads (clearance 0.25))
    (min_thickness 0.25) (filled_areas_thickness no)
    (fill yes (thermal_gap 0.5) (thermal_bridge_width 0.5))
    (polygon
      (pts
        (xy 155 35)
        (xy 195 35)
        (xy 195 125)
        (xy 155 125)
      )
    )
  )

)
